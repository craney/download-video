# 去水印下载网站 PRD 文档

## 1. 项目概述

### 1.1 项目背景
随着短视频平台的普及，用户经常需要下载无水印视频用于二次创作或保存。本项目旨在提供一个简单易用的去水印视频下载网站，用户只需粘贴分享链接即可获取无水印视频地址。

### 1.2 项目目标
开发一个网页应用，允许用户通过粘贴分享链接获取无水印视频地址，并提供下载链接。

## 2. 功能需求

### 2.1 用户认证
- 简单的用户名密码验证
- 用户名：tsyouyou
- 密码：bomits
- 暂时不实现注册和复杂的用户管理系统

### 2.2 核心功能

#### 2.2.1 链接解析
- 用户可以粘贴包含分享链接的文本（如抖音分享文本）
- 系统自动提取以 http 或 https 开头的有效链接
- 调用第三方API获取无水印视频地址

#### 2.2.2 视频信息展示
- 显示视频封面图
- 显示视频标题
- 显示无水印视频下载地址

#### 2.2.3 复制功能
- 为每个信息项提供复制按钮
- 点击后将对应内容复制到剪贴板

#### 2.2.4 下载功能
- 在视频无水印地址旁边添加下载按钮
- 点击后直接下载视频文件
- 下载文件名为视频标题

### 2.3 技术流程

#### 2.3.1 链接解析流程（方案A - 当前方案）
1. 用户输入包含分享链接的文本
2. 点击"开始解析"按钮
3. 系统使用正则表达式提取有效链接，称为 aurl
4. 调用API接口：`https://api.guijianpan.com/waterRemoveDetail/xxmQsyByAk?ak=7c683460fa194354864f8a8a378ae8aa&link=${aurl}`
5. 解析API返回结果，提取以下三个字段：
   - cover: 视频封面图地址
   - url: 无水印视频地址 (burl)
   - title: 视频标题
6. 在页面上展示这三个字段，每个字段旁边提供复制按钮
7. 在视频地址旁边添加下载按钮，点击后直接下载视频

#### 2.3.2 链接解析流程（方案B - 新方案）
1. 用户输入包含分享链接的文本
2. 点击"开始解析"按钮
3. 系统使用正则表达式提取有效链接
4. 调用接口：`http://143.110.155.36/api/douyin/web/get_aweme_id?url=` 获取视频 aweme_id
5. 调用接口：`http://143.110.155.36/api/douyin/web/fetch_one_video?aweme_id=` 获取视频详细信息
6. 解析API返回结果，提取以下三个字段：
   - cover: 视频封面图地址（$.data.aweme_detail.video.origin_cover.url_list[0]）
   - url: 无水印视频地址 ($.data.aweme_detail.video.play_addr.url_list[0])
   - title: 视频标题（$.data.aweme_detail.caption）
7. 在页面上展示这三个字段，每个字段旁边提供复制按钮
8. 在视频地址旁边添加下载按钮，点击后直接下载视频

## 3. 界面设计

### 3.1 登录页面
- 用户名输入框
- 密码输入框
- 登录按钮

### 3.2 主功能页面
- 文本输入区域：用于粘贴分享链接文本
- "开始解析"按钮
- 结果展示区域：
  - 视频封面图展示
  - 视频标题展示 + 复制按钮
  - 无水印视频地址展示 + 复制按钮 + 下载按钮

## 4. 非功能性需求

### 4.1 性能需求
- 页面加载时间不超过3秒
- API调用响应时间不超过10秒

### 4.2 兼容性需求
- 支持主流浏览器（Chrome、Firefox、Safari）
- 响应式设计，适配移动端和桌面端

### 4.3 安全需求
- 密码传输需要加密
- 防止恶意链接输入

## 5. API 接口说明

### 5.1 去水印解析接口（方案A）
- 地址：`https://api.guijianpan.com/waterRemoveDetail/xxmQsyByAk`
- 参数：
  - ak: 7c683460fa194354864f8a8a378ae8aa (固定值)
  - link: 提取的有效链接 (aurl)
- 返回数据格式：JSON
- 返回字段说明：
  - cover: 视频封面图地址
  - url: 无水印视频地址
  - title: 视频标题

### 5.2 去水印解析接口（方案B）
#### 5.2.1 获取视频 aweme_id 接口
- 地址：`http://143.110.155.36/api/douyin/web/get_aweme_id`
- 参数：
  - url: 提取的有效链接
- 返回数据格式：JSON
- 返回字段说明：
  - data: 视频 aweme_id

#### 5.2.2 获取视频详情接口
- 地址：`http://143.110.155.36/api/douyin/web/fetch_one_video`
- 参数：
  - aweme_id: 视频 aweme_id
- 返回数据格式：JSON
- 返回字段说明：
  - data.aweme_detail.caption: 视频标题
  - data.aweme_detail.video.origin_cover.url_list[0]: 视频封面图地址
  - data.aweme_detail.video.play_addr.url_list[0]: 无水印视频地址

## 6. 项目交付物

### 6.1 前端页面
- 登录页面
- 主功能页面

### 6.2 功能实现
- 用户认证
- 链接解析
- API调用
- 结果展示
- 复制功能
- 下载功能

## 7. 验收标准

- 用户可以使用指定用户名密码登录
- 可以成功解析包含分享链接的文本
- 能正确提取视频封面、标题和无水印地址
- 复制功能正常工作
- 下载功能正常工作，能正确下载视频文件
- 界面友好，响应迅速
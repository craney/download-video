(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();function a(t){if(!t||typeof t!="string")return[];const e=/https?:\/\/[^\s]+/g;return t.match(e)||[]}function c(t){const e=a(t);return e.length>0?e[0]:null}async function l(t){if(!t)throw new Error("链接不能为空");const e=`https://api.guijianpan.com/waterRemoveDetail/xxmQsyByAk?ak=7c683460fa194354864f8a8a378ae8aa&link=${encodeURIComponent(t)}`;try{const o=await fetch(e);if(!o.ok)throw new Error(`API请求失败: ${o.status} ${o.statusText}`);const n=await o.json();if(n.code!=="10000"||!n.content)throw new Error(n.msg||"解析失败");return{cover:n.content.cover,url:n.content.url,title:n.content.title}}catch(o){throw new Error(`解析失败: ${o.message}`)}}async function u(t){if(!t)return!1;try{return await navigator.clipboard.writeText(t),!0}catch{return d(t)}}function d(t){const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{const o=document.execCommand("copy");return document.body.removeChild(e),o}catch{return document.body.removeChild(e),!1}}const{createApp:f}=Vue;f({data(){return{username:"",password:"",isLoggedIn:!1,videoText:"",videoData:null,isLoading:!1,error:""}},methods:{login(){this.username==="tsyouyou"&&this.password==="bomits"?(this.isLoggedIn=!0,localStorage.setItem("isLoggedIn","true")):alert("用户名或密码错误")},async parseVideo(){if(this.videoData=null,this.error="",!this.videoText.trim()){this.error="请输入包含链接的文本";return}const t=c(this.videoText);if(!t){this.error="未找到有效的链接";return}this.isLoading=!0;try{this.videoData=await l(t)}catch(e){this.error=e.message}finally{this.isLoading=!1}},async copyText(t){const e=await u(t);alert(e?"复制成功":"复制失败")},checkLoginStatus(){localStorage.getItem("isLoggedIn")==="true"&&(this.isLoggedIn=!0)}},mounted(){this.checkLoginStatus()}}).mount("#app");
